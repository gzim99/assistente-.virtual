<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Chatbot Centralizado</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            margin: 0;
            height: 100vh;
        }

        .chat-container {
            width: 300px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 10px #aaa;
            position: fixed;
            top: 50%;       /* centraliza verticalmente */
            left: 50%;      /* centraliza horizontalmente */
            transform: translate(-50%, -50%); /* corrige posi√ß√£o para o centro exato */
            overflow: hidden;
        }

        .chat-header {
            background: #4CAF50;
            color: white;
            padding: 10px;
            text-align: center;
        }

        .chat-messages {
            height: 250px;
            padding: 10px;
            overflow-y: auto;
        }

        .chat-input {
            display: flex;
            border-top: 1px solid #ddd;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: none;
            outline: none;
        }

        .chat-input button {
            padding: 10px;
            border: none;
            background: #4CAF50;
            color: white;
            cursor: pointer;
        }

        .bot {
            color: green;
            margin: 5px 0;
        }

        .user {
            color: blue;
            margin: 5px 0;
            text-align: right;
        }
    </style>
</head>
<body>

<div class="chat-container">
    <div class="chat-header">Chatbot ü§ñ</div>
    <div class="chat-messages" id="messages">
        <div class="bot">Ol√°! Como posso te ajudar?</div>
    </div>
    <div class="chat-input">
        <input type="text" id="input" placeholder="Digite aqui...">
        <button onclick="sendMessage()">Enviar</button>
    </div>
</div>

<script>
const messages = document.getElementById("messages");
const input = document.getElementById("input");
const chatMemory = []; // mem√≥ria das √∫ltimas mensagens

function addMessage(text, className) {
    messages.innerHTML += `<div class="${className}">${text}</div>`;
    messages.scrollTop = messages.scrollHeight;
}

function botReply(text) {
    let response = "Ainda n√£o entendi totalmente ü§î. Pode explicar melhor?";

    // "Oi"
    if (text.match(/oi|ol√°|ola|eai|hey/)) {
        const respostasOi = [
            "Ol√°! üòä Que bom te ver por aqui. Como posso te ajudar hoje?",
            "Oi! üòÑ Tudo bem? Quer conversar comigo?",
            "E a√≠! üòÉ Como posso te ajudar?"
        ];
        response = respostasOi[Math.floor(Math.random() * respostasOi.length)];
    } 
    // "Nome"
    else if (text.includes("nome")) {
        const respostasNome = [
            "Eu sou um assistente virtual simples ü§ñ",
            "Pode me chamar de Chatbot! üòä",
            "Sou um bot feito para conversar com voc√™!"
        ];
        response = respostasNome[Math.floor(Math.random() * respostasNome.length)];
    } 
    // "Ajuda"
    else if (text.includes("ajuda")) {
        const respostasAjuda = [
            "Claro! Posso explicar conceitos simples e responder perguntas b√°sicas.",
            "Sim! Estou aqui para ajudar voc√™ no que puder üòä",
            "Com certeza! Pode me perguntar qualquer coisa simples."
        ];
        response = respostasAjuda[Math.floor(Math.random() * respostasAjuda.length)];
    } 
    // "Como voc√™ funciona"
    else if (text.includes("como voc√™ funciona")) {
        response = "Eu uso regras simples em JavaScript para identificar palavras-chave e responder com base nelas.";
    } 
    // "Quem √© voc√™"
    else if (text.includes("quem √© voc√™")) {
        response = "Sou um assistente virtual criado para ajudar voc√™ üòä";
    } 
    // "Array"
    else if (text.includes("array")) {
        if(chatMemory.some(msg => msg.includes("javascript"))) {
            response = "Ah, voc√™ quer aprender sobre arrays em JavaScript! Eles guardam v√°rios valores juntos e s√£o muito √∫teis.";
        } else {
            response = "Array √© uma lista de valores. Se quiser, posso te mostrar um exemplo em JavaScript!";
        }
    } 
    // "JavaScript"
    else if (text.includes("javascript")) {
        response = "JavaScript √© uma linguagem de programa√ß√£o que roda no navegador e no servidor.";
    } 
    // "Programa√ß√£o"
    else if (text.includes("programa√ß√£o")) {
        response = "Programar √© divertido e ajuda a resolver problemas de forma l√≥gica üòÑ";
    } 
    // "Estudo"
    else if (text.includes("estudo")) {
        response = "Estudar √© √≥timo! üìö Quer que eu te d√™ algumas dicas de estudo?";
    } 
    // "Sim"
    else if (text.includes("sim")) {
        if(chatMemory.some(msg => msg.includes("dicas de estudo"))) {
            response = "√ìtimo! Aqui vai uma dica: divida seus estudos em blocos de 25 minutos e fa√ßa pausas curtas! üìö";
        } else {
            response = "Que bom! üòä Pode me contar mais detalhes?";
        }
    } 
    // "N√£o"
    else if (text.includes("n√£o") || text.includes("nao")) {
        response = "Tudo bem üòÖ Se quiser, podemos falar sobre outra coisa!";
    } 
    // "Obrigado / Valeu"
    else if (text.includes("obrigado") || text.includes("valeu")) {
        response = "De nada! üòä Sempre que precisar, estou aqui para ajudar.";
    }

    setTimeout(() => addMessage(response, "bot"), 500);
}

function sendMessage() {
    const text = input.value.trim().toLowerCase();
    if (!text) return;

    addMessage(input.value, "user");
    chatMemory.push(text); // adiciona √† mem√≥ria
    if(chatMemory.length > 10) chatMemory.shift(); // mant√©m √∫ltimas 10 mensagens
    botReply(text);
    input.value = "";
}

input.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
        sendMessage();
    }
});
</script>

</body>
</html>
